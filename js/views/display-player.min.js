define(["underscore","jquery","backbone","text!templates/display-player-full.tpl","views/display-weapon-full"],function(e,t,n,r,i){var s=n.View.extend({tagName:"div",className:"player-display",initialize:function(){var t=this;this.listenTo(this.model,"change",function(){t.render(t.model.changed)});var n=this.model.attributes;this.$el.html(e.template(r,n));this.$name=this.$el.find(".name .value");this.$width=this.$el.find(".width .value");this.$height=this.$el.find(".height .value");this.$aim=this.$el.find(".aim .angle");this.$weapons=this.$el.find(".weapons");e.each(this.model.get("weapons"),function(e){var n=new i({model:e});t.$weapons.append(n.$el)});this.render();console.log(this.model.get("weapons"))},render:function(t){t||(t=this.model.attributes);e.has(t,"name")&&this.$name.html(t.name);e.has(t,"width")&&this.$width.html(t.width);e.has(t,"height")&&this.$height.html(t.height);if(e.has(t,"aim")||e.has(t,"facing")){var n=this.model.get("facing")==="left"?"-"+this.model.get("aim"):this.model.get("aim");this.$aim.html(n)}if(e.has(t,"activeWeapon")){this.$weapons.find(".weapon-display.active-weapon").removeClass("active-weapon");this.$weapons.find(".weapon-display").eq(t.activeWeapon).addClass("active-weapon")}}});return s});
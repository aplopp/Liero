define(["underscore","jquery","backbone","text!templates/display-player-full.tpl","views/display-weapon-full"],function(e,t,n,r,i){var s=n.View.extend({tagName:"div",className:"player-display",initialize:function(){var t=this;this.listenTo(this.model,"change",function(){t.render(t.model.changed)});var n=this.model.attributes;this.$el.html(e.template(r,n));this.$weapons=this.$el.find(".weapons");e.each(this.model.get("weapons"),function(e){var n=new i({model:e});t.$weapons.append(n.$el)});this.render()},render:function(t){t||(t=this.model.attributes);for(prop in t){var n=this.$el.find("."+prop+" .value");n.size()>0&&n.html(t[prop])}if(e.has(t,"activeWeapon")){this.$weapons.find(".weapon-display.active-weapon").removeClass("active-weapon");this.$weapons.find(".weapon-display").eq(t.activeWeapon).addClass("active-weapon")}}});return s});